<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人记账系统</title>
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <!-- 在 </head> 标签前添加 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div id="notification-container"></div>
    <div id="app">
        <!-- 头部导航 -->
        <header class="header">
            <div class="container">
                <h1 class="logo">💰 记账本</h1>
                <nav class="nav">
                    <button class="nav-btn active" data-page="dashboard">首页</button>
                    <button class="nav-btn" data-page="transactions">记录</button>
                    <button class="nav-btn" data-page="categories">分类</button>
                    <button class="nav-btn" data-page="budgets">预算</button>
                    <button class="nav-btn" data-page="statistics">统计</button>
                    <button class="nav-btn" data-page="settings">设置</button>
                </nav>
            </div>
        </header>

        <!-- 主内容区域 -->
        <main class="main">
            <div class="container">
                <!-- 仪表板页面 -->
                <div id="dashboard-page" class="page active">
                    <div class="dashboard-grid">
                        <div class="balance-card">
                            <h3>账户余额</h3>
                            <div class="balance-amount" id="balance-amount">¥0.00</div>
                        </div>
                        <div class="income-card">
                            <h3>本月收入</h3>
                            <div class="income-amount" id="income-amount">¥0.00</div>
                        </div>
                        <div class="expense-card">
                            <h3>本月支出</h3>
                            <div class="expense-amount" id="expense-amount">¥0.00</div>
                        </div>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-btn expense-btn" id="quick-expense">- 支出</button>
                        <button class="quick-btn income-btn" id="quick-income">+ 收入</button>
                    </div>

                    <div class="recent-transactions">
                        <h3>最近交易</h3>
                        <div id="recent-list" class="transaction-list">
                            <!-- 动态生成交易记录 -->
                        </div>
                    </div>
                </div>

                <!-- 其他页面将在后续添加 -->
                <div id="transactions-page" class="page">交易记录页面</div>
                <div id="categories-page" class="page">分类管理页面</div>
                <div id="budgets-page" class="page">预算管理页面</div>
                <div id="statistics-page" class="page">统计分析页面</div>
                
                <!-- 设置页面 -->
                <div id="settings-page" class="page">
                    <div class="settings-header">
                        <h2>⚙️ 应用设置</h2>
                    </div>
                    
                    <!-- 主题设置 -->
                    <div class="settings-section">
                        <h3>🎨 主题设置</h3>
                        
                        <!-- 新的主题选择器 -->
                        <div id="theme-selector" class="modern-theme-selector">
                            <!-- 主题选项将通过JavaScript动态生成 -->
                        </div>
                        
                        <!-- 保留原有radio按钮以兼容 -->
                        <div class="legacy-theme-selector" style="display: none;">
                            <input type="radio" id="light-theme" name="theme" value="light" checked>
                            <input type="radio" id="dark-theme" name="theme" value="dark">
                            <input type="radio" id="blue-theme" name="theme" value="blue">
                            <input type="radio" id="green-theme" name="theme" value="green">
                            <input type="radio" id="purple-theme" name="theme" value="purple">
                            <input type="radio" id="orange-theme" name="theme" value="orange">
                        </div>
                    </div>
                    
                    <!-- 数据管理 -->
                    <div class="settings-section">
                        <h3>📊 数据管理</h3>
                        <div class="export-options">
                            <button class="btn-info" id="export-json">📄 导出JSON</button>
                            <button class="btn-info" id="export-excel">📊 导出Excel</button>
                            <button class="btn-primary" id="import-data">📥 导入数据</button>
                            <input type="file" id="import-file" accept=".json" style="display: none;">
                        </div>
                        <div class="debug-options">
                            <button class="btn-warning" id="debug-data">🐞 执行数据诊断</button>
                        </div>
                    </div>
                    
                    <!-- 危险操作 -->
                    <div class="settings-section danger-section">
                        <h3>⚠️ 危险操作</h3>
                        <button class="btn-danger" id="clear-all-data">🗑️ 清空所有数据</button>
                        <p class="warning-text">此操作将永久删除所有数据，请谨慎操作！</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 添加交易模态框 -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">添加交易</h3>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <form id="transaction-form" class="modal-body">
                <div class="form-group">
                    <label for="amount">金额</label>
                    <input type="number" id="amount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="category">分类</label>
                    <select id="category" required>
                        <option value="">选择分类</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="description">描述</label>
                    <input type="text" id="description" placeholder="可选">
                </div>
                <div class="form-group">
                    <label for="date">日期</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancel-btn">取消</button>
                    <button type="submit" class="btn-submit">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 添加分类模态框 -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>添加分类</h2>
                <button class="close-btn">&times;</button>
            </div>
            <form id="category-form" class="modal-body">
                <input type="hidden" id="category-id">
                <div class="form-group">
                    <label for="category-name">分类名称</label>
                    <input type="text" id="category-name" required>
                </div>
                <div class="form-group">
                    <label for="category-type">分类类型</label>
                    <select id="category-type" required>
                        <option value="income">收入</option>
                        <option value="expense">支出</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="category-icon">分类图标</label>
                    <input type="text" id="category-icon" placeholder="例如：💰" required>
                </div>
                 <div class="form-group">
                    <label for="category-color">分类颜色</label>
                    <input type="color" id="category-color" value="#cccccc" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-cancel">取消</button>
                    <button type="submit" class="btn-submit">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 预算模态框 -->
    <div id="budget-modal" class="modal">
        <div class="modal-content budget-modal-content">
            <div class="modal-header budget-modal-header">
                <div class="modal-title-section">
                    <div class="modal-icon">💰</div>
                    <h3>创建预算</h3>
                </div>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="budget-form">
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="budget-name">
                                <span class="label-icon">📝</span>
                                <span class="label-text">预算名称</span>
                            </label>
                            <div class="input-wrapper">
                                <input type="text" id="budget-name" required placeholder="例如：本月餐饮预算">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group form-group-half">
                            <label for="budget-amount">
                                <span class="label-icon">💵</span>
                                <span class="label-text">预算金额</span>
                            </label>
                            <div class="input-wrapper amount-input">
                                <span class="currency-symbol">¥</span>
                                <input type="number" id="budget-amount" step="0.01" min="0" required placeholder="0.00">
                            </div>
                        </div>
                        <div class="form-group form-group-half">
                            <label for="budget-period">
                                <span class="label-icon">📅</span>
                                <span class="label-text">预算周期</span>
                            </label>
                            <div class="select-wrapper">
                                <select id="budget-period" required>
                                    <option value="weekly">📅 每周</option>
                                    <option value="monthly" selected>📅 每月</option>
                                    <option value="yearly">📅 每年</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="budget-category">
                                <span class="label-icon">🏷️</span>
                                <span class="label-text">预算分类</span>
                            </label>
                            <div class="select-wrapper">
                                <select id="budget-category" required>
                                    <option value="all">💸 所有支出</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group form-group-full">
                            <label for="budget-description">
                                <span class="label-icon">📄</span>
                                <span class="label-text">预算描述</span>
                                <span class="label-optional">（可选）</span>
                            </label>
                            <div class="textarea-wrapper">
                                <textarea id="budget-description" placeholder="添加预算说明，帮助您更好地管理支出..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions budget-form-actions">
                        <button type="button" class="btn-cancel">
                            <span class="btn-icon">❌</span>
                            <span class="btn-text">取消</span>
                        </button>
                        <button type="submit" class="btn-submit">
                            <span class="btn-icon">✅</span>
                            <span class="btn-text">保存预算</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 加载JavaScript -->
    <script src="js/utils.js?v=54321"></script>
    <script src="js/storage.js?v=54321"></script>
    <script src="js/data.js?v=54321"></script>
    <script src="js/ui.js?v=54321"></script>
    <script src="js/components.js?v=54321"></script>
    <script src="js/theme.js?v=54321"></script>
    <script src="js/app.js?v=54321"></script>
</body>
</html>